<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Learning Ecosystem</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            height: 100vh;
            max-width: 1600px;
            margin: 0 auto;
        }

        .panel {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            font-size: 1.5em;
            font-weight: bold;
        }

        /* Panel 1: Chat Interface */
        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.ai {
            flex-direction: row;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .message-content {
            background: #f0f0f0;
            padding: 12px 16px;
            border-radius: 15px;
            max-width: 70%;
            line-height: 1.5;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .input-section {
            padding: 20px;
            border-top: 2px solid #f0f0f0;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .voice-transcript {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 10px;
            min-height: 40px;
            color: #666;
            font-style: italic;
            display: none;
        }

        .voice-transcript.active {
            display: block;
        }

        .input-controls {
            display: flex;
            gap: 10px;
        }

        .text-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s;
        }

        .text-input:focus {
            border-color: #667eea;
        }

        .voice-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .voice-btn.listening {
            animation: pulse 1.5s infinite;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .send-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s;
        }

        .send-btn:hover {
            transform: translateY(-2px);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quick-btn {
            padding: 6px 12px;
            background: #f0f0f0;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }

        .quick-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        /* Panel 2: Learning Dashboard */
        .dashboard-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .lesson-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .lesson-title {
            font-size: 1.3em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .progress-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #333;
            font-weight: bold;
        }

        .learning-path {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .path-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-left: 4px solid #667eea;
            transition: all 0.3s;
        }

        .path-item:hover {
            background: #e8eaf6;
            transform: translateX(5px);
        }

        .path-icon {
            font-size: 24px;
        }

        .path-info {
            flex: 1;
        }

        .path-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .path-description {
            font-size: 12px;
            color: #666;
        }

        .gamification-zone {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .badges-container {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .badge {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .badge:hover {
            transform: scale(1.1);
        }

        .badge.locked {
            background: #e0e0e0;
            opacity: 0.5;
        }

        .badge-name {
            position: absolute;
            bottom: -25px;
            font-size: 10px;
            color: #666;
            text-align: center;
            width: 100px;
        }

        .ai-content-feed {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .refresh-btn {
            float: right;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .refresh-btn:hover {
            transform: rotate(180deg) scale(1.1);
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.4);
        }

        .content-items {
            margin-top: 15px;
        }

        .content-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
            transition: all 0.3s;
            cursor: pointer;
        }

        .content-item:hover {
            background: #e8eaf6;
            transform: translateX(5px);
        }

        .content-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
            font-size: 14px;
        }

        .content-description {
            font-size: 13px;
            color: #666;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .content-meta {
            font-size: 11px;
            color: #999;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .content-source {
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
        }

        .loading-spinner {
            text-align: center;
            padding: 20px;
            color: #999;
            font-style: italic;
        }

        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Panel 1: Instructor Chat -->
        <div class="panel">
            <div class="panel-header">ü§ñ AI Instructor Chat</div>
            <div class="chat-history" id="chatHistory">
                <!-- Messages will be added here -->
            </div>
            <div class="input-section">
                <div class="voice-transcript" id="voiceTranscript">Listening...</div>
                <div class="quick-actions">
                    <button class="quick-btn" onclick="quickAction('repeat')" title="Repeat the last instruction">üîÑ Repeat</button>
                    <button class="quick-btn" onclick="quickAction('hint')" title="Get a helpful hint">üí° Hint</button>
                    <button class="quick-btn" onclick="quickAction('examples')" title="Show me examples">üìù Examples</button>
                </div>
                <div class="input-controls">
                    <input type="text" class="text-input" id="textInput" placeholder="Type your message..." onkeypress="handleKeyPress(event)" title="Type your response here">
                    <button class="voice-btn" id="voiceBtn" onclick="toggleVoice()" title="Click to start voice recording">üé§</button>
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()" title="Send your message">Send</button>
                </div>
            </div>
        </div>

        <!-- Panel 2: Learning Dashboard -->
        <div class="panel">
            <div class="panel-header">üìä Your Learning Journey</div>
            <div class="dashboard-content">
                <div class="lesson-card">
                    <div class="lesson-title" id="currentStage">Welcome to AI Learning!</div>
                    <div style="opacity: 0.9;" id="stageDescription">Background & Introduction - Scroll down to explore AI topics</div>
                </div>

                <div class="progress-section">
                    <div class="section-title">Your Progress</div>
                    <div id="progressText">Getting Started</div>
                    <div class="learning-path" id="learningPath">
                        <div class="path-item">
                            <div class="path-icon">üìö</div>
                            <div class="path-info">
                                <div class="path-title">Part 1: Background</div>
                                <div class="path-description">Understanding AI fundamentals</div>
                            </div>
                        </div>
                        <div class="path-item">
                            <div class="path-icon">üöÄ</div>
                            <div class="path-info">
                                <div class="path-title">Part 2: Introduction</div>
                                <div class="path-description">AI in the real world</div>
                            </div>
                        </div>
                        <div class="path-item">
                            <div class="path-icon">üéØ</div>
                            <div class="path-info">
                                <div class="path-title">Your Custom Path</div>
                                <div class="path-description">Based on your interests</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="gamification-zone">
                    <div class="section-title">Your Achievements</div>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="pointsValue">0</div>
                            <div class="stat-label">Points</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="topicsValue">0</div>
                            <div class="stat-label">Topics Explored</div>
                        </div>
                    </div>
                    <div class="badges-container">
                        <div class="badge locked">
                            <span>üéì</span>
                            <div class="badge-name">Beginner</div>
                        </div>
                        <div class="badge locked">
                            <span>üîí</span>
                            <div class="badge-name">Explorer</div>
                        </div>
                        <div class="badge locked">
                            <span>üîí</span>
                            <div class="badge-name">Expert</div>
                        </div>
                    </div>
                </div>

                <div class="ai-content-feed">
                    <div class="section-title">
                        üåê Continue Learning and Explore AI
                        <button class="refresh-btn" onclick="fetchAIContent()" title="Refresh content">üîÑ</button>
                    </div>
                    <div id="aiContentContainer" class="content-items">
                        <div class="loading-spinner">Loading fresh AI content...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isListening = false;
        let recognition = null;
        let microphonePermissionGranted = false;
        let speechSynthesis = window.speechSynthesis;
        
        // Learning state
        let learningStage = 'welcome'; // welcome, background, introduction, interest-gathering, custom-learning
        let points = 0;
        let topicsExplored = 0;
        let userInterests = [];
        let conversationHistory = [];
        let lastAIMessage = '';

        // Initialize speech recognition
        function initializeSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.continuous = true;
                recognition.interimResults = true;
                recognition.lang = 'en-US';

                recognition.onstart = () => {
                    console.log('Voice recognition started');
                };

                recognition.onresult = (event) => {
                    const transcript = Array.from(event.results)
                        .map(result => result[0].transcript)
                        .join('');
                    
                    document.getElementById('voiceTranscript').textContent = transcript;
                    document.getElementById('textInput').value = transcript;
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    if (event.error === 'not-allowed') {
                        addMessage("Microphone permission was denied. Please enable it in your browser settings and refresh the page.", false);
                    }
                    stopListening();
                };

                recognition.onend = () => {
                    if (isListening) {
                        recognition.start();
                    }
                };
            }
        }

        // Text-to-speech function
        function speak(text) {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.9;
                utterance.pitch = 1;
                utterance.volume = 1;
                
                speechSynthesis.speak(utterance);
            }
        }

        // Request microphone permission and start
        async function requestMicrophonePermission() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                stream.getTracks().forEach(track => track.stop());
                microphonePermissionGranted = true;
                
                initializeSpeechRecognition();
                startWelcomeSequence();
                
            } catch (error) {
                console.error('Microphone permission error:', error);
                addMessage("We need microphone access for voice interaction. Please allow microphone access and refresh the page. You can still type your responses!", false);
                startWelcomeSequence();
            }
        }

        function startWelcomeSequence() {
            const welcomeMessage = "Welcome to your personalized AI Learning Journey! I'm your AI Instructor. Before we dive into your custom learning path, let me give you a quick background and introduction to AI. This will help you understand what's possible. Here's how to interact: Click the microphone button to speak, then click Send when you're done. Or simply type your responses. Ready to begin?";
            
            addMessage(welcomeMessage, false);
            speak(welcomeMessage);
            lastAIMessage = welcomeMessage;
        }

        function toggleVoice() {
            if (!recognition) {
                addMessage("Speech recognition is not available. Please use text input instead.", false);
                return;
            }

            if (!isListening) {
                try {
                    recognition.start();
                    isListening = true;
                    document.getElementById('voiceBtn').classList.add('listening');
                    document.getElementById('voiceBtn').textContent = 'üî¥';
                    document.getElementById('voiceTranscript').classList.add('active');
                    document.getElementById('voiceTranscript').textContent = 'Recording... Click Send when finished.';
                } catch (error) {
                    console.error('Error starting recognition:', error);
                }
            }
        }

        function stopListening() {
            isListening = false;
            document.getElementById('voiceBtn').classList.remove('listening');
            document.getElementById('voiceBtn').textContent = 'üé§';
            document.getElementById('voiceTranscript').classList.remove('active');
            document.getElementById('voiceTranscript').textContent = '';
        }

        function addMessage(text, isUser = false) {
            const chatHistory = document.getElementById('chatHistory');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'ai'}`;
            
            messageDiv.innerHTML = `
                <div class="message-avatar">${isUser ? 'üë§' : 'ü§ñ'}</div>
                <div class="message-content">${text}</div>
            `;
            
            chatHistory.appendChild(messageDiv);
            chatHistory.scrollTop = chatHistory.scrollHeight;
            
            conversationHistory.push({ role: isUser ? 'user' : 'assistant', content: text });
        }

        function sendMessage() {
            const input = document.getElementById('textInput');
            const message = input.value.trim();
            
            if (message) {
                if (isListening) {
                    recognition.stop();
                    stopListening();
                }
                
                addMessage(message, true);
                input.value = '';
                
                setTimeout(() => {
                    respondToUser(message);
                }, 1000);
            }
        }

        function respondToUser(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            let response = '';

            switch(learningStage) {
                case 'welcome':
                    if (lowerMessage.includes('yes') || lowerMessage.includes('ready') || lowerMessage.includes('sure') || lowerMessage.includes('start')) {
                        learningStage = 'background';
                        response = "Excellent! Let's start with Part 1: Background. AI, or Artificial Intelligence, is technology that enables machines to perform tasks that typically require human intelligence. There are different types: Reactive AI (responds to inputs), Limited Memory AI (learns from past data), and Generative AI (creates new content like text and images). Think of it as teaching computers to think and learn! Does this make sense so far?";
                        updateStage('Part 1: Background', 'Understanding AI fundamentals');
                        awardPoints(25);
                    } else {
                        response = "No problem! Take your time. When you're ready to explore the world of AI, just let me know. You can say 'I'm ready' or 'let's start' whenever you'd like to begin!";
                    }
                    break;

                case 'background':
                    if (lowerMessage.includes('yes') || lowerMessage.includes('make sense') || lowerMessage.includes('understand') || lowerMessage.includes('got it')) {
                        learningStage = 'introduction';
                        response = "Great! Now for Part 2: Introduction to Real-World AI. AI is all around us! It powers voice assistants like Siri and Alexa, recommends shows on Netflix, filters spam in your email, helps doctors diagnose diseases, and even drives cars. ChatGPT and similar tools use Generative AI to have conversations like this one. Can you think of any AI tools you've used before?";
                        updateStage('Part 2: Introduction', 'AI in the real world');
                        awardPoints(25);
                    } else {
                        response = "Let me explain differently. Think of AI like this: Reactive AI is like a calculator - it gives instant answers. Limited Memory AI is like Netflix learning what you like to watch. Generative AI is like an artist creating something new. Does that help clarify things?";
                    }
                    break;

                case 'introduction':
                    learningStage = 'interest-gathering';
                    response = "Fantastic! You're getting it! Now that you understand the basics, it's time to create YOUR personalized learning path. What aspects of AI are you most curious about? For example: 1) How AI actually works (machine learning, neural networks), 2) Practical AI tools you can use (ChatGPT, image generation, coding assistants), 3) AI in specific fields (healthcare, business, art, education), 4) Building AI applications yourself, or 5) AI ethics and future implications. What interests YOU most?";
                    updateStage('Your Turn!', 'Tell me what you want to learn');
                    awardPoints(50);
                    topicsExplored++;
                    updateStats();
                    break;

                case 'interest-gathering':
                    if (lowerMessage.includes('1') || lowerMessage.includes('how') || lowerMessage.includes('work') || lowerMessage.includes('learn') || lowerMessage.includes('neural')) {
                        userInterests.push('technical');
                        learningStage = 'custom-learning';
                        response = "Excellent choice! You want to understand the technical side of AI. I'll create a learning path covering: Machine Learning basics, Neural Networks and Deep Learning, Training AI models, and Real-world implementations. We'll start with Machine Learning - the foundation of modern AI. Are you ready to dive deep into how machines actually learn from data?";
                        createCustomPath('technical');
                    } else if (lowerMessage.includes('2') || lowerMessage.includes('practical') || lowerMessage.includes('tool') || lowerMessage.includes('chatgpt') || lowerMessage.includes('use')) {
                        userInterests.push('practical');
                        learningStage = 'custom-learning';
                        response = "Perfect! You want to learn practical AI tools you can use right away. I'll guide you through: Mastering ChatGPT and prompt engineering, AI image generation (DALL-E, Midjourney), AI coding assistants (GitHub Copilot), and AI productivity tools. Let's start with prompt engineering - the art of communicating effectively with AI. Ready to become a prompt expert?";
                        createCustomPath('practical');
                    } else if (lowerMessage.includes('3') || lowerMessage.includes('field') || lowerMessage.includes('healthcare') || lowerMessage.includes('business') || lowerMessage.includes('specific')) {
                        userInterests.push('field-specific');
                        learningStage = 'custom-learning';
                        response = "Great! You're interested in AI applications in specific fields. Which field interests you most? Healthcare (diagnosis, drug discovery), Business (automation, analytics), Education (personalized learning), Creative Arts (music, art generation), or Finance (trading, risk analysis)? Tell me your field and I'll create a specialized learning path!";
                        createCustomPath('field-specific');
                    } else if (lowerMessage.includes('4') || lowerMessage.includes('build') || lowerMessage.includes('create') || lowerMessage.includes('develop') || lowerMessage.includes('code')) {
                        userInterests.push('building');
                        learningStage = 'custom-learning';
                        response = "Ambitious! You want to build AI applications yourself. I'll teach you: Python for AI, Working with AI APIs, Building chatbots and agents, Creating machine learning models, and Deploying AI applications. We'll start with Python basics and AI libraries. Have you programmed before, or should we start from the very beginning?";
                        createCustomPath('building');
                    } else if (lowerMessage.includes('5') || lowerMessage.includes('ethic') || lowerMessage.includes('future') || lowerMessage.includes('impact') || lowerMessage.includes('society')) {
                        userInterests.push('ethics');
                        learningStage = 'custom-learning';
                        response = "Thoughtful choice! Understanding AI's impact is crucial. We'll explore: AI ethics and bias, Privacy and data concerns, Job automation and economy, AI safety and alignment, and The future of human-AI collaboration. Let's begin with AI ethics - why does AI sometimes make biased decisions? Ready to explore this important topic?";
                        createCustomPath('ethics');
                    } else if (lowerMessage.includes('not sure') || lowerMessage.includes('don\'t know') || lowerMessage.includes('help') || lowerMessage.includes('suggest')) {
                        response = "No worries! Let me suggest a learning path based on what's trending in AI right now. I recommend: 1) Start with Prompt Engineering (most immediately useful), 2) Explore Generative AI tools (ChatGPT, image generation), 3) Learn about AI automation for work, 4) Understand AI safety basics. This path will make you AI-fluent in today's world. Sound good?";
                    } else {
                        response = "I want to make sure I understand what you're interested in. Could you tell me more? Are you interested in: understanding how AI works technically, using AI tools practically, AI in a specific industry, building AI yourself, or the ethical implications of AI? Or if you're not sure, I can suggest a learning path based on current AI developments!";
                    }
                    awardPoints(100);
                    topicsExplored++;
                    updateStats();
                    break;

                case 'custom-learning':
                    // Dynamic responses based on user's learning path
                    response = generateCustomLearningResponse(userMessage);
                    awardPoints(50);
                    topicsExplored++;
                    updateStats();
                    break;
            }

            addMessage(response, false);
            speak(response);
            lastAIMessage = response;
        }

        function generateCustomLearningResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            
            if (lowerMessage.includes('yes') || lowerMessage.includes('ready') || lowerMessage.includes('continue')) {
                return "Awesome! Let's dive in. I'll teach you step-by-step with examples, interactive exercises, and real-world applications. What specific question do you have, or should I start with the fundamentals of your chosen topic?";
            } else if (lowerMessage.includes('example')) {
                return "Great question! Let me give you a concrete example. For instance, if you're learning about prompt engineering, here's a practical example: Instead of asking 'Tell me about climate change', a better prompt is 'Explain climate change to a 10-year-old using a simple analogy'. See how being specific helps? What would you like an example of?";
            } else if (lowerMessage.includes('more') || lowerMessage.includes('next') || lowerMessage.includes('continue')) {
                return "Excellent progress! Let's build on what you've learned. Based on your interest, here's the next concept... What aspect would you like to explore deeper?";
            } else {
                return "That's a great point! Let me address that specifically. " + getContextualResponse(lowerMessage, userInterests[0]) + " What else would you like to know?";
            }
        }

        function getContextualResponse(message, interest) {
            const responses = {
                'technical': "In machine learning, models learn patterns from data through training. Think of it like teaching a child - you show examples until they recognize patterns.",
                'practical': "The key to mastering AI tools is understanding how to communicate with them effectively. Clear, specific instructions get better results.",
                'field-specific': "AI is transforming industries by automating complex tasks and providing insights from massive amounts of data.",
                'building': "Building AI applications starts with understanding APIs and frameworks. Python makes this accessible even for beginners.",
                'ethics': "AI ethics involves ensuring fairness, transparency, and accountability in AI systems that increasingly affect our lives."
            };
            return responses[interest] || "Let me explain that concept in more detail for you.";
        }

        function updateStage(title, description) {
            document.getElementById('currentStage').textContent = title;
            document.getElementById('stageDescription').textContent = description;
        }

        function createCustomPath(pathType) {
            const paths = {
                'technical': [
                    { icon: 'üß†', title: 'Machine Learning Basics', desc: 'How machines learn from data' },
                    { icon: 'üï∏Ô∏è', title: 'Neural Networks', desc: 'Deep learning fundamentals' },
                    { icon: 'üìä', title: 'Model Training', desc: 'Training and optimization' },
                    { icon: 'üöÄ', title: 'Advanced Topics', desc: 'Transformers and more' }
                ],
                'practical': [
                    { icon: '‚úçÔ∏è', title: 'Prompt Engineering', desc: 'Master AI communication' },
                    { icon: 'üé®', title: 'Image Generation', desc: 'Create AI art' },
                    { icon: 'üíª', title: 'Coding Assistants', desc: 'AI-powered development' },
                    { icon: '‚ö°', title: 'Productivity Tools', desc: 'Work smarter with AI' }
                ],
                'field-specific': [
                    { icon: 'üè•', title: 'Choose Your Field', desc: 'Healthcare, Business, Education...' },
                    { icon: 'üìà', title: 'Industry Applications', desc: 'Real-world use cases' },
                    { icon: 'üî¨', title: 'Case Studies', desc: 'Success stories' },
                    { icon: 'üéØ', title: 'Implementation', desc: 'Apply to your work' }
                ],
                'building': [
                    { icon: 'üêç', title: 'Python Basics', desc: 'Programming foundations' },
                    { icon: 'üîå', title: 'AI APIs', desc: 'Connect to AI services' },
                    { icon: 'ü§ñ', title: 'Build Chatbots', desc: 'Create conversational AI' },
                    { icon: 'üåê', title: 'Deploy Apps', desc: 'Share your creations' }
                ],
                'ethics': [
                    { icon: '‚öñÔ∏è', title: 'AI Ethics', desc: 'Fairness and bias' },
                    { icon: 'üîí', title: 'Privacy & Data', desc: 'Protecting information' },
                    { icon: 'üíº', title: 'Job Impact', desc: 'Automation effects' },
                    { icon: 'üîÆ', title: 'Future of AI', desc: 'What comes next' }
                ]
            };

            const pathHTML = paths[pathType].map((item, index) => `
                <div class="path-item">
                    <div class="path-icon">${item.icon}</div>
                    <div class="path-info">
                        <div class="path-title">${item.title}</div>
                        <div class="path-description">${item.desc}</div>
                    </div>
                </div>
            `).join('');

            document.getElementById('learningPath').innerHTML = pathHTML;
            document.getElementById('progressText').textContent = `Custom Path: ${pathType.charAt(0).toUpperCase() + pathType.slice(1)}`;
        }

        function awardPoints(amount) {
            points += amount;
            document.getElementById('pointsValue').textContent = points;
            
            // Unlock badges
            const badges = document.querySelectorAll('.badge');
            if (points >= 50 && badges[0]) {
                badges[0].classList.remove('locked');
                badges[0].style.background = 'linear-gradient(135deg, #ffd89b 0%, #19547b 100%)';
            }
            if (points >= 200 && badges[1]) {
                badges[1].classList.remove('locked');
                badges[1].innerHTML = '<span>üåü</span><div class="badge-name">Explorer</div>';
                badges[1].style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
            }
            if (points >= 500 && badges[2]) {
                badges[2].classList.remove('locked');
                badges[2].innerHTML = '<span>üèÜ</span><div class="badge-name">Expert</div>';
                badges[2].style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            }
        }

        function updateStats() {
            document.getElementById('topicsValue').textContent = topicsExplored;
        }

        function quickAction(action) {
            let message = '';
            switch(action) {
                case 'repeat':
                    message = lastAIMessage;
                    break;
                case 'hint':
                    message = "üí° Hint: Try being more specific with your questions. For example, instead of 'tell me about AI', ask 'how does machine learning work?' or 'what AI tools can I use for writing?'";
                    break;
                case 'examples':
                    message = "üìù Here are some example questions you could ask: 'What's the difference between AI and machine learning?', 'How can I use AI in my daily work?', 'What are the best free AI tools?', 'How do I write better prompts?', or 'What should I learn first about AI?'";
                    break;
            }
            addMessage(message, false);
            speak(message);
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            requestMicrophonePermission();
            fetchAIContent();
        });

        // Fetch fresh AI content from public APIs
        async function fetchAIContent() {
            const container = document.getElementById('aiContentContainer');
            container.innerHTML = '<div class="loading-spinner">Loading fresh AI content...</div>';

            try {
                // Using Wikipedia API for AI topics
                const topics = ['Artificial_intelligence', 'Machine_learning', 'ChatGPT', 'Neural_network', 'Generative_artificial_intelligence'];
                const randomTopic = topics[Math.floor(Math.random() * topics.length)];
                
                const wikiResponse = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${randomTopic}`);
                const wikiData = await wikiResponse.json();

                // Using arXiv API for AI research papers
                const arxivResponse = await fetch('https://export.arxiv.org/api/query?search_query=cat:cs.AI&start=0&max_results=5&sortBy=submittedDate&sortOrder=descending');
                const arxivText = await arxivResponse.text();
                const arxivPapers = parseArxivXML(arxivText);

                // Display content
                let contentHTML = '';

                // Add Wikipedia summary
                if (wikiData && wikiData.extract) {
                    contentHTML += `
                        <div class="content-item" onclick="openLink('${wikiData.content_urls.desktop.page}')">
                            <div class="content-title">üìñ ${wikiData.title}</div>
                            <div class="content-description">${wikiData.extract.substring(0, 150)}...</div>
                            <div class="content-meta">
                                <span class="content-source">Wikipedia</span>
                                <span>Click to read more</span>
                            </div>
                        </div>
                    `;
                }

                // Add arXiv papers
                arxivPapers.forEach((paper, index) => {
                    if (index < 3) {
                        contentHTML += `
                            <div class="content-item" onclick="openLink('${paper.link}')">
                                <div class="content-title">üî¨ ${paper.title}</div>
                                <div class="content-description">${paper.summary.substring(0, 120)}...</div>
                                <div class="content-meta">
                                    <span class="content-source">arXiv</span>
                                    <span>${paper.published}</span>
                                </div>
                            </div>
                        `;
                    }
                });

                // Add curated AI learning resources
                contentHTML += `
                    <div class="content-item" onclick="openLink('https://www.deeplearning.ai/')">
                        <div class="content-title">üéì DeepLearning.AI Courses</div>
                        <div class="content-description">Free courses by Andrew Ng on machine learning and AI fundamentals</div>
                        <div class="content-meta">
                            <span class="content-source">Education</span>
                            <span>Recommended</span>
                        </div>
                    </div>
                    <div class="content-item" onclick="openLink('https://huggingface.co/')">
                        <div class="content-title">ü§ó Hugging Face Hub</div>
                        <div class="content-description">Explore the latest AI models, datasets, and machine learning demos</div>
                        <div class="content-meta">
                            <span class="content-source">Community</span>
                            <span>Interactive</span>
                        </div>
                    </div>
                `;

                container.innerHTML = contentHTML;

            } catch (error) {
                console.error('Error fetching AI content:', error);
                container.innerHTML = `
                    <div class="content-item">
                        <div class="content-title">üìö Recommended AI Resources</div>
                        <div class="content-description">Explore these curated learning resources:</div>
                    </div>
                    <div class="content-item" onclick="openLink('https://www.deeplearning.ai/')">
                        <div class="content-title">üéì DeepLearning.AI</div>
                        <div class="content-description">Free AI courses by Andrew Ng</div>
                        <div class="content-meta">
                            <span class="content-source">Education</span>
                        </div>
                    </div>
                    <div class="content-item" onclick="openLink('https://paperswithcode.com/')">
                        <div class="content-title">üìä Papers with Code</div>
                        <div class="content-description">Latest AI research papers with implementations</div>
                        <div class="content-meta">
                            <span class="content-source">Research</span>
                        </div>
                    </div>
                    <div class="content-item" onclick="openLink('https://huggingface.co/')">
                        <div class="content-title">ü§ó Hugging Face</div>
                        <div class="content-description">AI models and datasets community</div>
                        <div class="content-meta">
                            <span class="content-source">Community</span>
                        </div>
                    </div>
                `;
            }
        }

        function parseArxivXML(xmlString) {
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(xmlString, "text/xml");
            const entries = xmlDoc.getElementsByTagName('entry');
            const papers = [];

            for (let i = 0; i < Math.min(entries.length, 5); i++) {
                const entry = entries[i];
                const title = entry.getElementsByTagName('title')[0]?.textContent.trim().replace(/\s+/g, ' ') || 'Untitled';
                const summary = entry.getElementsByTagName('summary')[0]?.textContent.trim().replace(/\s+/g, ' ') || '';
                const link = entry.getElementsByTagName('id')[0]?.textContent || '';
                const published = entry.getElementsByTagName('published')[0]?.textContent.split('T')[0] || '';

                papers.push({ title, summary, link, published });
            }

            return papers;
        }

        function openLink(url) {
            window.open(url, '_blank');
        }
    </script>
</body>
</html>