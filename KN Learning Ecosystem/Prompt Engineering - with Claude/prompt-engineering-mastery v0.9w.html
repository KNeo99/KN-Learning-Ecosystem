<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Engineering Mastery - LLM Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .flashcard-container {
            perspective: 1000px;
            height: 200px;
        }
        .flashcard {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flashcard-flipped .flashcard {
            transform: rotateY(180deg);
        }
        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 1rem;
            padding: 1.5rem;
        }
        .flashcard-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .flashcard-back {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: rotateY(180deg);
        }
        .message-animation {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .llm-card {
            transition: all 0.3s ease;
        }
        .llm-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .comparison-table {
            overflow-x: auto;
        }
        .badge-pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        .prompt-example {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-left: 4px solid #667eea;
        }
        .speak-active {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                    üéì Prompt Engineering Mastery
                </h1>
                <div class="flex gap-4 items-center">
                    <div class="text-sm font-semibold text-gray-700">
                        <span id="totalPoints" class="text-blue-600">0</span> pts
                    </div>
                    <div class="text-sm font-semibold text-gray-700">
                        <span id="streakCounter">0 Day Streak! üî•</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-6">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- Main Learning Area -->
            <div class="lg:col-span-2 space-y-6">
                
                <!-- Navigation Tabs -->
                <div class="bg-white rounded-2xl shadow-lg p-4">
                    <div class="flex gap-2 overflow-x-auto">
                        <button onclick="showTab('prompt-learning')" id="promptTab" class="tab-btn px-6 py-2 rounded-lg font-semibold transition-all bg-blue-600 text-white">
                            üí¨ Prompt Lessons
                        </button>
                        <button onclick="showTab('llm-explorer')" id="llmTab" class="tab-btn px-6 py-2 rounded-lg font-semibold transition-all bg-gray-200 text-gray-700 hover:bg-gray-300">
                            ü§ñ LLM Explorer
                        </button>
                        <button onclick="showTab('comparison')" id="comparisonTab" class="tab-btn px-6 py-2 rounded-lg font-semibold transition-all bg-gray-200 text-gray-700 hover:bg-gray-300">
                            ‚öñÔ∏è Compare LLMs
                        </button>
                    </div>
                </div>

                <!-- Prompt Engineering Learning Section -->
                <div id="promptLearningSection" class="tab-content">
                    <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                        <div class="bg-gradient-to-r from-blue-600 to-purple-600 p-4 text-white">
                            <h2 class="text-xl font-bold mb-1">Interactive Prompt Engineering</h2>
                            <p class="text-sm text-blue-100">Master the art of communicating with AI</p>
                        </div>

                        <div id="chatMessages" class="p-6 space-y-4 h-80 overflow-y-auto bg-gray-50">
                            <!-- Messages will be added here -->
                        </div>

                        <div class="p-4 bg-white border-t">
                            <div class="flex gap-2 mb-3 flex-wrap">
                                <button onclick="toggleSpeech()" id="speakBtn" class="px-3 py-1 text-xs bg-indigo-100 text-indigo-700 rounded-full hover:bg-indigo-200 transition">
                                    üîä Read Aloud
                                </button>
                                <button onclick="showExample()" class="px-3 py-1 text-xs bg-green-100 text-green-700 rounded-full hover:bg-green-200 transition">
                                    ‚ú® Show Example
                                </button>
                                <button onclick="showGuidedPrompt()" class="px-3 py-1 text-xs bg-pink-100 text-pink-700 rounded-full hover:bg-pink-200 transition">
                                    üìù Guided Practice
                                </button>
                                <button onclick="giveHint()" class="px-3 py-1 text-xs bg-yellow-100 text-yellow-700 rounded-full hover:bg-yellow-200 transition">
                                    üí° Hint
                                </button>
                                <button onclick="showFlashcards()" class="px-3 py-1 text-xs bg-purple-100 text-purple-700 rounded-full hover:bg-purple-200 transition">
                                    üÉè Flashcards
                                </button>
                                <button onclick="nextLesson()" class="px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition">
                                    ‚è≠Ô∏è Next Lesson
                                </button>
                            </div>
                            <div class="flex gap-2">
                                <input type="text" id="userInput" placeholder="Type your prompt or answer..." 
                                    class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"
                                    onkeypress="if(event.key==='Enter') sendMessage()">
                                <button onclick="sendMessage()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold">
                                    Send
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- LLM Explorer Section -->
                <div id="llmExplorerSection" class="tab-content hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                            ü§ñ Explore AI Language Models
                        </h2>
                        <p class="text-gray-600 mb-6">Discover the unique capabilities of different AI models. Click on each to learn more!</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="llmCardsContainer">
                            <!-- LLM cards will be generated here -->
                        </div>

                        <!-- LLM Detail Modal -->
                        <div id="llmDetailModal" class="hidden mt-6 p-6 bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl border-2 border-blue-300">
                            <div class="flex justify-between items-start mb-4">
                                <h3 id="modalLLMName" class="text-2xl font-bold"></h3>
                                <button onclick="closeLLMDetail()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                            </div>
                            <div id="modalLLMContent" class="space-y-4">
                                <!-- Detail content will be populated here -->
                            </div>
                            <div class="mt-6 flex gap-3">
                                <button onclick="tryLLMQuiz()" class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-semibold">
                                    üéØ Take Quiz
                                </button>
                                <button onclick="earnLLMBadge()" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-semibold">
                                    üèÜ Earn Badge
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Comparison Section -->
                <div id="comparisonSection" class="tab-content hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                            ‚öñÔ∏è Compare AI Models
                        </h2>
                        <p class="text-gray-600 mb-6">See how different LLMs stack up against each other</p>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Select LLMs to Compare:</label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2" id="llmCheckboxes">
                                <!-- Checkboxes will be generated here -->
                            </div>
                        </div>

                        <button onclick="generateComparison()" class="mb-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold">
                            Compare Selected Models
                        </button>

                        <div id="comparisonResults" class="comparison-table">
                            <!-- Comparison table will be generated here -->
                        </div>
                    </div>
                </div>

                <!-- Flashcard Section -->
                <div id="flashcardSection" class="hidden mt-6">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold">üìö Study Flashcards</h3>
                            <button onclick="closeFlashcards()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                        </div>
                        
                        <p class="text-sm text-gray-600 mb-3 text-center">üí° Click the card to flip it!</p>
                        
                        <div id="flashcardContainer" class="flashcard-container mb-4 cursor-pointer" onclick="flipCard()">
                            <div class="flashcard">
                                <div class="flashcard-front">
                                    <p id="flashcardFront" class="text-xl font-semibold text-center"></p>
                                </div>
                                <div class="flashcard-back">
                                    <p id="flashcardBack" class="text-lg text-center"></p>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-between items-center">
                            <button onclick="previousCard()" class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition">
                                ‚Üê Previous
                            </button>
                            <span id="cardCounter" class="text-sm font-semibold text-gray-600">1 / 1</span>
                            <button onclick="nextCard()" class="px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition">
                                Next ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-4">
                
                <!-- Current Lesson (Compact) -->
                <div class="bg-white rounded-2xl shadow-lg p-4">
                    <h3 class="text-sm font-bold mb-2 text-gray-800">üìñ Current Lesson</h3>
                    <div class="p-3 bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg">
                        <p class="font-semibold text-gray-800 text-sm" id="currentLessonTitle">Prompting Basics</p>
                        <p class="text-xs text-gray-600 mt-1" id="currentLessonConcept">Foundation of AI communication</p>
                    </div>
                </div>

                <!-- Resources -->
                <div class="bg-white rounded-2xl shadow-lg p-4">
                    <h3 class="text-sm font-bold mb-2 text-gray-800">üîó Resources</h3>
                    <p class="text-xs text-gray-600 mb-2" id="referencesDescription">Curated learning materials</p>
                    <div id="referencesContainer" class="space-y-2 max-h-48 overflow-y-auto">
                        <!-- References will be populated here -->
                    </div>
                </div>

                <!-- Learning Path -->
                <div class="bg-white rounded-2xl shadow-lg p-4">
                    <h3 class="text-sm font-bold mb-2 text-gray-800">üó∫Ô∏è Learning Path</h3>
                    <div id="learningPath" class="space-y-2 max-h-80 overflow-y-auto">
                        <!-- Learning path will be populated here -->
                    </div>
                </div>

                <!-- Badges & Achievements -->
                <div class="bg-white rounded-2xl shadow-lg p-4">
                    <h3 class="text-sm font-bold mb-2 text-gray-800">üèÜ Your Badges</h3>
                    <div id="badgesContainer" class="grid grid-cols-2 gap-2">
                        <p class="text-gray-500 text-xs col-span-2">Keep learning to earn badges!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let points = 0;
        let streak = 1;
        let userProgress = 0;
        let currentLesson = 0;
        let badges = [];
        let messages = [];
        let currentFlashcardIndex = 0;
        let flashcardFlipped = false;
        let currentLLMSelected = null;
        let selectedLLMsForComparison = [];
        let lessonStep = 0;
        let speechSynthesis = window.speechSynthesis;
        let currentUtterance = null;
        let isSpeaking = false;
        let speechAvailable = false;
        let voicesLoaded = false;

        // LLM Data
        const llmData = [
            {
                id: 'claude',
                name: 'Claude (Anthropic)',
                icon: 'ü§ñ',
                color: 'from-orange-400 to-red-500',
                description: 'Thoughtful, nuanced responses with strong reasoning capabilities',
                strengths: ['Long context windows (200K)', 'Strong reasoning', 'Detailed explanations', 'Constitutional AI safety'],
                weaknesses: ['No image generation', 'Knowledge cutoff'],
                bestFor: 'Complex analysis, research, detailed writing, coding assistance',
                contextWindow: '200K tokens',
                released: '2023',
                quiz: [
                    { q: 'What company created Claude?', a: 'Anthropic' },
                    { q: 'What is Claude\'s key safety approach called?', a: 'Constitutional AI' }
                ]
            },
            {
                id: 'gpt4',
                name: 'GPT-4 (OpenAI)',
                icon: 'üåü',
                color: 'from-green-400 to-teal-500',
                description: 'Versatile model with strong general capabilities',
                strengths: ['Multimodal (text & images)', 'Wide knowledge base', 'Plugin ecosystem', 'Code interpreter'],
                weaknesses: ['Can be verbose', 'Knowledge cutoff limitations'],
                bestFor: 'General tasks, creative writing, multimodal analysis, plugin integration',
                contextWindow: '128K tokens',
                released: '2023',
                quiz: [
                    { q: 'Which company developed GPT-4?', a: 'OpenAI' },
                    { q: 'Can GPT-4 process images?', a: 'Yes' }
                ]
            },
            {
                id: 'gemini',
                name: 'Gemini (Google)',
                icon: 'üíé',
                color: 'from-blue-400 to-purple-500',
                description: 'Google\'s multimodal AI with strong search integration',
                strengths: ['Real-time search integration', 'Multimodal', 'Google ecosystem', 'Fast responses'],
                weaknesses: ['Newer model', 'Less creative in some tasks'],
                bestFor: 'Research with current info, factual queries, Google Workspace integration',
                contextWindow: '1M tokens (Pro 1.5)',
                released: '2023',
                quiz: [
                    { q: 'What company makes Gemini?', a: 'Google' },
                    { q: 'What\'s unique about Gemini\'s context window?', a: 'Very large (1M tokens)' }
                ]
            },
            {
                id: 'llama',
                name: 'Llama (Meta)',
                icon: 'ü¶ô',
                color: 'from-purple-400 to-pink-500',
                description: 'Open-source model that can run locally',
                strengths: ['Open-source', 'Can run locally', 'Privacy-friendly', 'Customizable'],
                weaknesses: ['Requires technical setup', 'Smaller versions less capable'],
                bestFor: 'Privacy-sensitive tasks, custom applications, local deployment',
                contextWindow: '8K-128K tokens',
                released: '2023',
                quiz: [
                    { q: 'Is Llama open-source?', a: 'Yes' },
                    { q: 'Which company developed Llama?', a: 'Meta' }
                ]
            },
            {
                id: 'mistral',
                name: 'Mistral AI',
                icon: 'üåä',
                color: 'from-cyan-400 to-blue-500',
                description: 'European open-source models with strong performance',
                strengths: ['Open-source options', 'Efficient', 'European data privacy', 'Good reasoning'],
                weaknesses: ['Smaller ecosystem', 'Less well-known'],
                bestFor: 'European deployments, cost-effective solutions, specialized tasks',
                contextWindow: '32K tokens',
                released: '2023',
                quiz: [
                    { q: 'Where is Mistral AI based?', a: 'Europe (France)' },
                    { q: 'Does Mistral offer open-source models?', a: 'Yes' }
                ]
            },
            {
                id: 'cohere',
                name: 'Cohere',
                icon: 'üîó',
                color: 'from-pink-400 to-rose-500',
                description: 'Enterprise-focused AI with strong retrieval capabilities',
                strengths: ['RAG capabilities', 'Enterprise features', 'Semantic search', 'Embeddings'],
                weaknesses: ['Less known for chat', 'Smaller public presence'],
                bestFor: 'Enterprise search, retrieval augmented generation, embeddings',
                contextWindow: '128K tokens',
                released: '2021',
                quiz: [
                    { q: 'What is Cohere best known for?', a: 'Enterprise AI and RAG' },
                    { q: 'What does RAG stand for?', a: 'Retrieval Augmented Generation' }
                ]
            }
        ];

        // 10 Prompt Engineering Lessons
        const lessons = [
            {
                title: '1. Prompting Basics',
                description: 'Foundation of AI communication',
                concept: 'Clear communication is the key to effective AI interactions',
                content: {
                    intro: "Welcome to Prompt Engineering! A prompt is how you communicate with AI. The better your prompt, the better the response.",
                    question: "What do you think makes a prompt effective?",
                    goodAnswers: ['clear', 'specific', 'detailed', 'context'],
                    example: {
                        bad: '‚ùå "Tell me about dogs"',
                        good: '‚úÖ "Explain the key differences between Golden Retrievers and Labrador Retrievers in terms of temperament and care requirements"',
                        why: 'The second prompt is specific, clear, and includes what aspects to focus on.'
                    }
                },
                flashcards: [
                    { front: 'What is a prompt?', back: 'Instructions or questions you give to an AI to get a specific response' },
                    { front: 'Why is clarity important in prompts?', back: 'Clear prompts help AI understand exactly what you want, leading to better responses' }
                ],
                references: [
                    { title: 'Prompt Engineering Guide', type: 'Guide', url: 'https://www.promptingguide.ai/' },
                    { title: 'OpenAI Best Practices', type: 'Documentation', url: 'https://platform.openai.com/docs/guides/prompt-engineering' },
                    { title: 'Learn Prompting - Free Course', type: 'Course', url: 'https://learnprompting.org/' }
                ]
            },
            {
                title: '2. Be Clear & Specific',
                description: 'Precision in your requests',
                concept: 'Specific prompts yield specific results',
                content: {
                    intro: "Vague prompts get vague responses. Being specific helps AI understand exactly what you need.",
                    question: "Try improving this prompt: 'Write something about climate'",
                    goodAnswers: ['climate change', 'impact', 'specific region', 'solutions', 'effects'],
                    example: {
                        bad: '‚ùå "Write something about climate"',
                        good: '‚úÖ "Write a 300-word explanation of how climate change is affecting coral reefs in the Caribbean, including 3 specific conservation strategies"',
                        why: 'This specifies the topic, length, geographic focus, and what to include.'
                    }
                },
                flashcards: [
                    { front: 'How does being specific improve prompts?', back: 'It narrows the scope and helps AI focus on exactly what you need' },
                    { front: 'Give an example of making a vague prompt specific', back: '"Help me cook" ‚Üí "Give me a 30-minute vegetarian pasta recipe for 4 people"' }
                ],
                references: [
                    { title: 'Writing Clear Prompts - Anthropic', type: 'Guide', url: 'https://docs.anthropic.com/claude/docs/introduction-to-prompt-design' },
                    { title: 'Specificity in Prompting', type: 'Article', url: 'https://www.promptingguide.ai/introduction/basics' },
                    { title: 'Prompt Engineering Tutorial', type: 'Video', url: 'https://www.youtube.com/results?search_query=prompt+engineering+tutorial' }
                ]
            },
            {
                title: '3. Provide Context',
                description: 'Background information matters',
                concept: 'Context helps AI understand your situation and needs',
                content: {
                    intro: "Context is the background information that helps AI give relevant, tailored responses. Always explain WHO you are, WHAT you need, and WHY.",
                    question: "What context would help if asking for business advice?",
                    goodAnswers: ['industry', 'company size', 'budget', 'goals', 'audience', 'experience'],
                    example: {
                        bad: '‚ùå "How do I market my product?"',
                        good: '‚úÖ "I\'m a founder of a B2B SaaS startup with a $5K monthly marketing budget. My target audience is small business owners aged 35-50. How should I prioritize my marketing channels?"',
                        why: 'Provides business type, budget constraints, audience details - all crucial context.'
                    }
                },
                flashcards: [
                    { front: 'Why is context important in prompts?', back: 'It helps AI tailor responses to your specific situation, making answers more relevant and useful' },
                    { front: 'What types of context should you include?', back: 'Your role, goals, constraints, audience, industry, and relevant background information' }
                ],
                references: [
                    { title: 'Providing Context - OpenAI Guide', type: 'Guide', url: 'https://platform.openai.com/docs/guides/prompt-engineering/strategy-write-clear-instructions' },
                    { title: 'Context in Prompting - Learn Prompting', type: 'Tutorial', url: 'https://learnprompting.org/docs/basics/instructions' },
                    { title: 'Writing Effective Prompts', type: 'Article', url: 'https://help.openai.com/en/articles/6654000-best-practices-for-prompt-engineering-with-openai-api' }
                ]
            },
            {
                title: '4. Use Examples (Few-Shot)',
                description: 'Show, don\'t just tell',
                concept: 'Examples teach AI exactly what format you want',
                content: {
                    intro: "Few-shot learning means giving AI examples of what you want. This is incredibly powerful for formatting and style.",
                    question: "When would examples be most helpful?",
                    goodAnswers: ['formatting', 'style', 'tone', 'structure', 'pattern'],
                    example: {
                        bad: '‚ùå "Write product descriptions"',
                        good: '‚úÖ "Write product descriptions in this style:\n\nExample 1: Wireless Mouse - Click into comfort with our ergonomic wireless mouse. 2400 DPI precision meets all-day battery life. Your wrist will thank you.\n\nNow write one for: Mechanical Keyboard"',
                        why: 'The example shows exact style, length, and tone expected.'
                    }
                },
                flashcards: [
                    { front: 'What is few-shot learning?', back: 'Providing AI with examples to demonstrate the desired output format or style' },
                    { front: 'When should you use examples in prompts?', back: 'When you need specific formatting, consistent style, or want to demonstrate a pattern' }
                ],
                references: [
                    { title: 'Few-Shot Prompting Guide', type: 'Guide', url: 'https://www.promptingguide.ai/techniques/fewshot' },
                    { title: 'OpenAI Few-Shot Examples', type: 'Documentation', url: 'https://platform.openai.com/docs/guides/prompt-engineering/tactic-provide-examples' },
                    { title: 'In-Context Learning', type: 'Research', url: 'https://arxiv.org/abs/2005.14165' }
                ]
            },
            {
                title: '5. Chain of Thought',
                description: 'Breaking down complex reasoning',
                concept: 'Asking AI to "think step-by-step" improves accuracy',
                content: {
                    intro: "Chain of Thought prompting asks AI to show its reasoning process. This dramatically improves accuracy on complex problems.",
                    question: "What phrase encourages step-by-step thinking?",
                    goodAnswers: ['step-by-step', 'think through', 'explain', 'reasoning', 'process'],
                    example: {
                        bad: '‚ùå "What\'s 15% of 340?"',
                        good: '‚úÖ "What\'s 15% of 340? Think through this step-by-step and show your work."',
                        why: 'Requesting step-by-step reasoning reduces errors and makes the process transparent.'
                    }
                },
                flashcards: [
                    { front: 'What is Chain of Thought prompting?', back: 'Asking AI to explain its reasoning step-by-step, which improves accuracy on complex tasks' },
                    { front: 'When should you use Chain of Thought?', back: 'For math problems, logical reasoning, complex analysis, or when you need to understand the process' }
                ],
                references: [
                    { title: 'Chain of Thought Paper', type: 'Research', url: 'https://arxiv.org/abs/2201.11903' },
                    { title: 'Chain of Thought Prompting', type: 'Guide', url: 'https://www.promptingguide.ai/techniques/cot' },
                    { title: 'Step-by-Step Reasoning', type: 'Tutorial', url: 'https://learnprompting.org/docs/intermediate/chain_of_thought' }
                ]
            },
            {
                title: '6. Role-Based Prompting',
                description: 'Assign AI a specific role',
                concept: 'Roles help AI adopt appropriate expertise and tone',
                content: {
                    intro: "Assigning a role to AI helps it understand what perspective and expertise to use. This shapes both tone and content quality.",
                    question: "What role would you assign for career advice?",
                    goodAnswers: ['career coach', 'hr expert', 'mentor', 'recruiter', 'counselor'],
                    example: {
                        bad: '‚ùå "Give me resume tips"',
                        good: '‚úÖ "You are an experienced tech recruiter who has reviewed 10,000+ resumes. Review my software engineer resume and suggest 5 specific improvements that would make it stand out."',
                        why: 'The role provides expertise context and shapes the quality of feedback.'
                    }
                },
                flashcards: [
                    { front: 'What is role-based prompting?', back: 'Assigning AI a specific role or persona to shape its expertise, tone, and perspective' },
                    { front: 'How do roles improve AI responses?', back: 'Roles help AI adopt appropriate expertise, adjust tone, and provide more specialized insights' }
                ],
                references: [
                    { title: 'Role Prompting Techniques', type: 'Guide', url: 'https://www.promptingguide.ai/techniques/role' },
                    { title: 'Persona Patterns', type: 'Article', url: 'https://arxiv.org/abs/2302.11382' },
                    { title: 'System Messages & Roles', type: 'Documentation', url: 'https://platform.openai.com/docs/guides/prompt-engineering/tactic-ask-the-model-to-adopt-a-persona' }
                ]
            },
            {
                title: '7. Format Your Output',
                description: 'Structure the response you want',
                concept: 'Specify exactly how you want information organized',
                content: {
                    intro: "Don't just ask for information - specify how you want it formatted. Markdown, JSON, tables, bullet points - whatever works for your use case.",
                    question: "What format works best for comparison data?",
                    goodAnswers: ['table', 'list', 'comparison', 'chart', 'grid'],
                    example: {
                        bad: '‚ùå "Compare iPhone and Android"',
                        good: '‚úÖ "Compare iPhone vs Android in a markdown table with columns: Feature, iPhone, Android, Winner. Include rows for: Price Range, App Ecosystem, Customization, Privacy, Hardware Options"',
                        why: 'Specifies exact format (table), structure (columns/rows), and what to compare.'
                    }
                },
                flashcards: [
                    { front: 'Why specify output format in prompts?', back: 'It ensures you get information in a usable structure that fits your needs' },
                    { front: 'Name 4 common output formats', back: 'Markdown, JSON, tables, bullet points, numbered lists, code blocks' }
                ],
                references: [
                    { title: 'Structured Output Guide', type: 'Documentation', url: 'https://platform.openai.com/docs/guides/structured-outputs' },
                    { title: 'Formatting Prompts', type: 'Guide', url: 'https://www.promptingguide.ai/techniques/formatting' },
                    { title: 'JSON Mode & Formatting', type: 'Tutorial', url: 'https://cookbook.openai.com/examples/how_to_format_inputs_to_chatgpt_models' }
                ]
            },
            {
                title: '8. Constraints & Boundaries',
                description: 'Set clear limitations',
                concept: 'Constraints guide AI and prevent unwanted results',
                content: {
                    intro: "Constraints tell AI what NOT to do or what limits to respect. Word count, tone restrictions, content boundaries - all help focus the output.",
                    question: "What constraints might you set for a blog post?",
                    goodAnswers: ['word count', 'tone', 'audience', 'length', 'format', 'avoid'],
                    example: {
                        bad: '‚ùå "Write a blog post about productivity"',
                        good: '‚úÖ "Write a 500-word blog post about productivity for busy parents. Use a warm, empathetic tone. Avoid jargon. Don\'t mention apps or tools that cost money. Include 3 actionable tips."',
                        why: 'Multiple clear constraints: length, audience, tone, restrictions, and structure.'
                    }
                },
                flashcards: [
                    { front: 'What are constraints in prompting?', back: 'Limitations and boundaries you set to guide AI output (word count, tone, what to avoid, etc.)' },
                    { front: 'Why use constraints in prompts?', back: 'To keep responses focused, appropriate, and within desired parameters' }
                ],
                references: [
                    { title: 'Setting Constraints', type: 'Guide', url: 'https://www.promptingguide.ai/techniques/constraints' },
                    { title: 'Prompt Engineering Best Practices', type: 'Article', url: 'https://help.openai.com/en/articles/6654000-best-practices-for-prompt-engineering-with-openai-api' },
                    { title: 'Control & Constraints', type: 'Tutorial', url: 'https://learnprompting.org/docs/basics/configuration_hyperparameters' }
                ]
            },
            {
                title: '9. Iterative Refinement',
                description: 'Improve through conversation',
                concept: 'Great prompts often come from refining initial attempts',
                content: {
                    intro: "Don't expect perfection on the first try. Iterate! Refine your prompt based on the response. This is how experts work with AI.",
                    question: "What would you do if the first response wasn't quite right?",
                    goodAnswers: ['refine', 'clarify', 'add details', 'iterate', 'be more specific', 'give feedback'],
                    example: {
                        iteration1: 'First: "Write about coffee" ‚Üí Too vague',
                        iteration2: 'Better: "Write about health benefits of coffee" ‚Üí Missing structure',
                        iteration3: 'Best: "Write a 400-word article about 3 scientifically-proven health benefits of coffee, citing recent studies, for health-conscious millennials"',
                        why: 'Each iteration adds specificity, structure, and context.'
                    }
                },
                flashcards: [
                    { front: 'What is iterative refinement?', back: 'The process of improving prompts through multiple attempts based on AI responses' },
                    { front: 'How do you refine a prompt?', back: 'Add specificity, clarify intent, provide more context, adjust constraints, or give examples based on previous responses' }
                ],
                references: [
                    { title: 'Iterative Prompt Design', type: 'Guide', url: 'https://platform.openai.com/docs/guides/prompt-engineering/strategy-test-changes-systematically' },
                    { title: 'Refining Prompts', type: 'Tutorial', url: 'https://learnprompting.org/docs/basics/iterative_prompting' },
                    { title: 'Prompt Iteration Strategies', type: 'Article', url: 'https://www.promptingguide.ai/introduction/iterative' }
                ]
            },
            {
                title: '10. Advanced Techniques',
                description: 'Power-user strategies',
                concept: 'Combine techniques for professional-grade results',
                content: {
                    intro: "Master prompt engineers combine multiple techniques: role + examples + constraints + chain of thought. This creates professional-quality outputs.",
                    question: "Which techniques would you combine for a business report?",
                    goodAnswers: ['role', 'format', 'examples', 'constraints', 'context', 'structure'],
                    example: {
                        basic: '‚ùå "Write a business report"',
                        advanced: '‚úÖ "You are a senior business analyst. Create a quarterly performance report following this structure:\n\nExample format:\n[Executive Summary - 2 paragraphs]\n[Key Metrics - bullet points]\n[Analysis - 3 sections]\n[Recommendations - numbered list]\n\nUse data: Q3 revenue $2.1M (‚Üë15%), customer churn 3.2% (‚Üì0.8%), NPS score 67 (‚Üë5). Length: 800 words. Tone: professional but accessible. Think step-by-step through the analysis section."',
                        why: 'Combines: role, format, examples, data context, constraints, and chain of thought.'
                    }
                },
                flashcards: [
                    { front: 'What makes an advanced prompt?', back: 'Combining multiple techniques: role, context, examples, constraints, formatting, and reasoning instructions' },
                    { front: 'Name 3 techniques to combine', back: 'Any combination of: role-based, few-shot examples, chain of thought, constraints, formatting, context' }
                ],
                references: [
                    { title: 'Advanced Prompting Techniques', type: 'Guide', url: 'https://www.promptingguide.ai/techniques' },
                    { title: 'Prompt Engineering for GPT-4', type: 'Course', url: 'https://www.deeplearning.ai/short-courses/chatgpt-prompt-engineering-for-developers/' },
                    { title: 'Master Class in Prompting', type: 'Article', url: 'https://docs.anthropic.com/claude/docs/prompt-engineering' },
                    { title: 'Advanced Patterns & Techniques', type: 'Research', url: 'https://arxiv.org/abs/2302.11382' },
                    { title: 'Prompt Engineering Workshop', type: 'Video Series', url: 'https://www.youtube.com/results?search_query=advanced+prompt+engineering' }
                ]
            }
        ];

        // Badge System
        const badgesList = [
            { id: 1, name: 'First Prompt', icon: 'üå±', points: 10 },
            { id: 2, name: 'Prompt Novice', icon: 'üìù', points: 50 },
            { id: 3, name: 'Context Master', icon: 'üéØ', points: 100 },
            { id: 4, name: 'Few-Shot Expert', icon: 'üéì', points: 200 },
            { id: 5, name: 'Prompt Engineer', icon: '‚ö°', points: 350 },
            { id: 6, name: 'AI Whisperer', icon: 'üßô', points: 500 }
        ];

        // Tab Navigation
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(el => {
                el.classList.remove('bg-blue-600', 'text-white');
                el.classList.add('bg-gray-200', 'text-gray-700');
            });

            if (tabName === 'prompt-learning') {
                document.getElementById('promptLearningSection').classList.remove('hidden');
                document.getElementById('promptTab').classList.add('bg-blue-600', 'text-white');
                document.getElementById('promptTab').classList.remove('bg-gray-200', 'text-gray-700');
            } else if (tabName === 'llm-explorer') {
                document.getElementById('llmExplorerSection').classList.remove('hidden');
                document.getElementById('llmTab').classList.add('bg-blue-600', 'text-white');
                document.getElementById('llmTab').classList.remove('bg-gray-200', 'text-gray-700');
                loadLLMCards();
            } else if (tabName === 'comparison') {
                document.getElementById('comparisonSection').classList.remove('hidden');
                document.getElementById('comparisonTab').classList.add('bg-blue-600', 'text-white');
                document.getElementById('comparisonTab').classList.remove('bg-gray-200', 'text-gray-700');
                loadComparisonCheckboxes();
            }
        }

        // LLM Explorer Functions
        function loadLLMCards() {
            const container = document.getElementById('llmCardsContainer');
            container.innerHTML = '';
            
            llmData.forEach(llm => {
                const card = document.createElement('div');
                card.className = `llm-card p-5 bg-gradient-to-br ${llm.color} rounded-xl cursor-pointer text-white shadow-lg`;
                card.onclick = () => showLLMDetail(llm.id);
                card.innerHTML = `
                    <div class="text-4xl mb-2">${llm.icon}</div>
                    <h3 class="text-xl font-bold mb-2">${llm.name}</h3>
                    <p class="text-sm opacity-90">${llm.description}</p>
                    <div class="mt-4 text-xs opacity-80">
                        <span class="bg-white/20 px-2 py-1 rounded">Context: ${llm.contextWindow}</span>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function showLLMDetail(llmId) {
            const llm = llmData.find(l => l.id === llmId);
            currentLLMSelected = llm;
            
            document.getElementById('llmDetailModal').classList.remove('hidden');
            document.getElementById('modalLLMName').textContent = `${llm.icon} ${llm.name}`;
            
            const content = `
                <div class="bg-white p-4 rounded-lg">
                    <p class="text-gray-700 mb-4">${llm.description}</p>
                    
                    <div class="mb-4">
                        <h4 class="font-bold text-green-700 mb-2">‚úÖ Strengths:</h4>
                        <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                            ${llm.strengths.map(s => `<li>${s}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="mb-4">
                        <h4 class="font-bold text-red-700 mb-2">‚ö†Ô∏è Limitations:</h4>
                        <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
                            ${llm.weaknesses.map(w => `<li>${w}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="bg-blue-50 p-3 rounded-lg">
                        <h4 class="font-bold text-blue-800 mb-1">üéØ Best For:</h4>
                        <p class="text-sm text-gray-700">${llm.bestFor}</p>
                    </div>
                    
                    <div class="mt-4 grid grid-cols-2 gap-3 text-sm">
                        <div class="bg-purple-50 p-2 rounded">
                            <span class="font-semibold text-purple-800">Context Window:</span>
                            <p class="text-gray-700">${llm.contextWindow}</p>
                        </div>
                        <div class="bg-pink-50 p-2 rounded">
                            <span class="font-semibold text-pink-800">Released:</span>
                            <p class="text-gray-700">${llm.released}</p>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalLLMContent').innerHTML = content;
            earnPoints(20);
        }

        function closeLLMDetail() {
            document.getElementById('llmDetailModal').classList.add('hidden');
        }

        function tryLLMQuiz() {
            if (!currentLLMSelected) return;
            
            const quiz = currentLLMSelected.quiz;
            const question = quiz[Math.floor(Math.random() * quiz.length)];
            
            const answer = prompt(`üéØ Quick Quiz!\n\n${question.q}`);
            
            if (answer && answer.toLowerCase().includes(question.a.toLowerCase())) {
                alert('üéâ Correct! +50 points!');
                earnPoints(50);
            } else {
                alert(`ü§î Not quite! The answer is: ${question.a}\n\nYou still earn +10 points for trying!`);
                earnPoints(10);
            }
        }

        function earnLLMBadge() {
            if (!currentLLMSelected) return;
            
            const newBadge = {
                id: `llm-${currentLLMSelected.id}`,
                name: `${currentLLMSelected.name} Expert`,
                icon: currentLLMSelected.icon
            };
            
            if (!badges.find(b => b.id === newBadge.id)) {
                badges.push(newBadge);
                updateBadges();
                earnPoints(100);
                alert(`üèÜ Congratulations! You've earned the "${newBadge.name}" badge!`);
            } else {
                alert('You already have this badge! Keep exploring other LLMs.');
            }
        }

        // Comparison Functions
        function loadComparisonCheckboxes() {
            const container = document.getElementById('llmCheckboxes');
            container.innerHTML = '';
            
            llmData.forEach(llm => {
                const div = document.createElement('div');
                div.className = 'flex items-center gap-2 p-2 bg-gray-50 rounded hover:bg-gray-100';
                div.innerHTML = `
                    <input type="checkbox" id="compare-${llm.id}" value="${llm.id}" 
                        class="w-4 h-4" onchange="updateComparisonSelection()">
                    <label for="compare-${llm.id}" class="text-sm cursor-pointer flex-1">
                        ${llm.icon} ${llm.name}
                    </label>
                `;
                container.appendChild(div);
            });
        }

        function updateComparisonSelection() {
            selectedLLMsForComparison = [];
            document.querySelectorAll('#llmCheckboxes input:checked').forEach(cb => {
                selectedLLMsForComparison.push(cb.value);
            });
        }

        function generateComparison() {
            if (selectedLLMsForComparison.length < 2) {
                alert('Please select at least 2 LLMs to compare!');
                return;
            }

            const selectedLLMs = llmData.filter(llm => selectedLLMsForComparison.includes(llm.id));
            
            let tableHTML = `
                <table class="w-full border-collapse">
                    <thead>
                        <tr class="bg-gray-200">
                            <th class="border p-3 text-left font-bold">Feature</th>
                            ${selectedLLMs.map(llm => `<th class="border p-3 text-center">${llm.icon} ${llm.name}</th>`).join('')}
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="border p-3 font-semibold bg-gray-50">Context Window</td>
                            ${selectedLLMs.map(llm => `<td class="border p-3 text-center">${llm.contextWindow}</td>`).join('')}
                        </tr>
                        <tr>
                            <td class="border p-3 font-semibold bg-gray-50">Released</td>
                            ${selectedLLMs.map(llm => `<td class="border p-3 text-center">${llm.released}</td>`).join('')}
                        </tr>
                        <tr>
                            <td class="border p-3 font-semibold bg-gray-50">Best For</td>
                            ${selectedLLMs.map(llm => `<td class="border p-3 text-sm">${llm.bestFor}</td>`).join('')}
                        </tr>
                        <tr>
                            <td class="border p-3 font-semibold bg-gray-50">Key Strengths</td>
                            ${selectedLLMs.map(llm => `<td class="border p-3 text-sm"><ul class="list-disc list-inside">${llm.strengths.slice(0, 3).map(s => `<li>${s}</li>`).join('')}</ul></td>`).join('')}
                        </tr>
                    </tbody>
                </table>
            `;
            
            document.getElementById('comparisonResults').innerHTML = tableHTML;
            earnPoints(30);
        }

        // Prompt Learning Functions
        function addMessage(type, text, animate = false) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${type === 'user' ? 'justify-end' : 'justify-start'} ${animate ? 'message-animation' : ''}`;
            
            const bubbleClass = type === 'user' 
                ? 'bg-blue-600 text-white' 
                : 'bg-white text-gray-800 border border-gray-200';
            
            messageDiv.innerHTML = `
                <div class="${bubbleClass} rounded-2xl px-4 py-3 max-w-md shadow-sm">
                    <p class="text-sm whitespace-pre-line">${text}</p>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            messages.push({ type, text });
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            addMessage('user', text, true);
            input.value = '';
            
            processUserInput(text);
        }

        function earnPoints(amount) {
            points += amount;
            updatePoints();
        }

        function processUserInput(text) {
            const lowerText = text.toLowerCase();
            const lesson = lessons[currentLesson];
            let earnedPoints = Math.floor(Math.random() * 10) + 15;

            setTimeout(() => {
                let response = '';
                let progressIncrease = 0;

                // Check if answer contains good keywords
                const hasGoodAnswer = lesson.content.goodAnswers.some(keyword => 
                    lowerText.includes(keyword)
                );

                // Check for guided practice context
                if (text.length > 20 && (lowerText.includes('i am') || lowerText.includes('i\'m') || lowerText.includes('my'))) {
                    // User included personal context
                    response = `Excellent! üéØ I can see you've included personal context: "${text.substring(0, 50)}..."\n\nThis is great because:\n‚úì You've specified WHO you are\n‚úì This helps AI understand your perspective\n‚úì Responses will be more relevant to YOU\n\n+${earnedPoints + 10} points for personalization!\n\nNow, what specific outcome do you want? (Type your goal or desired result)`;
                    earnPoints(earnedPoints + 10);
                    progressIncrease = 25;
                    if (speechAvailable) speakText(response);
                } else if (text.length > 30 && text.includes('?')) {
                    // User wrote a question with some detail
                    const wordCount = text.split(' ').length;
                    if (wordCount > 10) {
                        response = `Great work! üåü Your prompt has ${wordCount} words and includes:\n${text.includes('who') || text.includes('what') || text.includes('how') ? '‚úì Question words (who/what/how)' : ''}\n${text.includes(',') || text.includes('and') ? '‚úì Multiple details' : ''}\n${text.match(/[0-9]/) ? '‚úì Specific numbers' : ''}\n\n+${earnedPoints + 5} points!\n\nThis is shaping up well! Want to see how to make it even better? Type 'improve' or continue practicing!`;
                        earnPoints(earnedPoints + 5);
                        progressIncrease = 20;
                        if (speechAvailable) speakText(response);
                    } else {
                        response = `Good start! Your prompt could be stronger with more details. Try adding:\n‚Ä¢ WHO you are (context)\n‚Ä¢ WHAT exactly you need\n‚Ä¢ WHY you need it\n‚Ä¢ Any constraints (time, budget, etc.)\n\n+${earnedPoints} points! Try again with more details:`;
                        earnPoints(earnedPoints);
                        progressIncrease = 10;
                        if (speechAvailable) speakText(response);
                    }
                } else if (lessonStep === 0) {
                    // First interaction with lesson
                    if (hasGoodAnswer) {
                        response = `Excellent thinking! üéØ ${lesson.content.goodAnswers.filter(kw => lowerText.includes(kw)).map(kw => `"${kw}"`).join(', ')} - those are exactly the kind of elements we're looking for!\n\n+${earnedPoints} points!\n\nWant to try the guided practice? Click "üìù Guided Practice" or type 'practice' to build a real prompt together!`;
                        earnPoints(earnedPoints);
                        progressIncrease = 30;
                        lessonStep = 1;
                        if (speechAvailable) speakText(response);
                    } else {
                        response = `Good effort! üí™ Let me give you a hint: ${lesson.content.intro}\n\n+${Math.floor(earnedPoints/2)} points for participating!\n\nTry answering again, or click "üìù Guided Practice" for step-by-step help!`;
                        earnPoints(Math.floor(earnedPoints/2));
                        progressIncrease = 10;
                        if (speechAvailable) speakText(response);
                    }
                } else if (lessonStep === 1) {
                    // Show example
                    if (lowerText.includes('yes') || lowerText.includes('example') || lowerText.includes('show') || lowerText.includes('practice')) {
                        const ex = lesson.content.example;
                        response = `Here's an example:\n\n${ex.bad}\n\n${ex.good}\n\nüí° Why is the second better? ${ex.why}\n\n+${earnedPoints} points!\n\nReady to practice? Click "üìù Guided Practice" or type 'next' for the next lesson!`;
                        earnPoints(earnedPoints);
                        progressIncrease = 50;
                        lessonStep = 2;
                        streak++;
                        updateStreak();
                        if (speechAvailable) speakText(response);
                    } else {
                        response = `I see you wrote: "${text}"\n\nLet me analyze this:\n${text.length > 50 ? '‚úì Good length' : '‚ö†Ô∏è Try adding more detail'}\n${text.includes('?') ? '‚úì Clear question' : '‚ö†Ô∏è Consider phrasing as a question'}\n\n+${earnedPoints} points!\n\nWant guided help? Click "üìù Guided Practice"!`;
                        earnPoints(earnedPoints);
                        progressIncrease = 15;
                        if (speechAvailable) speakText(response);
                    }
                } else {
                    // General responses
                    response = `Great! You're making progress. Your response shows effort!\n\n+${earnedPoints} points!\n\nType 'practice' for guided exercises, 'next' for the next lesson, or 'flashcards' to review!`;
                    earnPoints(earnedPoints);
                    progressIncrease = 10;
                    if (speechAvailable) speakText(response);
                }

                userProgress = Math.min(100, userProgress + progressIncrease);
                updateProgress();
                addMessage('ai', response, true);

                if (userProgress >= 100) {
                    userProgress = 100;
                    updateProgress();
                }
            }, 800);
        }

        function showExample() {
            const lesson = lessons[currentLesson];
            const ex = lesson.content.example;
            
            let exampleText = '';
            if (ex.iteration1) {
                exampleText = `üìö Iterative Example:\n\n${ex.iteration1}\n\n${ex.iteration2}\n\n${ex.iteration3}\n\nüí° ${ex.why}`;
            } else if (ex.basic) {
                exampleText = `üìö Basic vs Advanced:\n\n${ex.basic}\n\n${ex.advanced}\n\nüí° ${ex.why}`;
            } else {
                exampleText = `üìö Example:\n\n${ex.bad}\n\n${ex.good}\n\nüí° ${ex.why}`;
            }
            
            addMessage('ai', exampleText, true);
            if (speechAvailable) speakText(exampleText);
            earnPoints(10);
        }

        function giveHint() {
            const lesson = lessons[currentLesson];
            const hint = `üí° Hint: Think about ${lesson.content.goodAnswers.slice(0, 2).join(' and ')}. ${lesson.content.intro}`;
            addMessage('ai', hint, true);
            if (speechAvailable) speakText(hint);
        }

        // Text-to-Speech Functions
        function initializeSpeech() {
            // Check if speech synthesis is available
            if (!('speechSynthesis' in window)) {
                speechAvailable = false;
                console.log('Speech synthesis not supported in this browser');
                updateSpeechButton(false);
                return;
            }

            // Wait for voices to load (critical for Windows)
            function loadVoices() {
                const voices = speechSynthesis.getVoices();
                if (voices.length > 0) {
                    voicesLoaded = true;
                    speechAvailable = true;
                    console.log(`Speech synthesis ready! ${voices.length} voices available`);
                    updateSpeechButton(true);
                }
            }

            // Load voices immediately
            loadVoices();

            // Also listen for voiceschanged event (important for Chrome/Edge on Windows)
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }

            // Set a timeout to check if voices loaded (fallback for Windows)
            setTimeout(() => {
                if (!voicesLoaded) {
                    loadVoices();
                    if (!voicesLoaded) {
                        console.warn('Voices not loaded after timeout');
                        showSpeechSetupInstructions();
                    }
                }
            }, 1000);
        }

        function updateSpeechButton(enabled) {
            const speakBtn = document.getElementById('speakBtn');
            if (!enabled) {
                speakBtn.textContent = 'üîá Audio Unavailable';
                speakBtn.classList.add('opacity-50', 'cursor-not-allowed');
                speakBtn.onclick = showSpeechSetupInstructions;
            } else {
                speakBtn.textContent = 'üîä Read Aloud';
                speakBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        function showSpeechSetupInstructions() {
            const browserInfo = getBrowserInfo();
            let instructions = `üîä Audio Setup Instructions for ${browserInfo.name}\n\n`;

            if (browserInfo.isWindows) {
                instructions += `Windows 11 Setup:\n\n`;
                
                if (browserInfo.isChrome || browserInfo.isEdge) {
                    instructions += `‚úÖ Good news! Chrome/Edge supports text-to-speech.\n\n`;
                    instructions += `If audio isn't working:\n\n`;
                    instructions += `1. Check Windows Sound Settings:\n`;
                    instructions += `   - Press Windows + I for Settings\n`;
                    instructions += `   - Go to System > Sound\n`;
                    instructions += `   - Ensure your speakers/headphones are enabled\n\n`;
                    instructions += `2. Enable Windows Speech:\n`;
                    instructions += `   - Settings > Time & Language > Speech\n`;
                    instructions += `   - Download a speech voice if needed\n\n`;
                    instructions += `3. Browser Settings:\n`;
                    instructions += `   - Click the üîí or ‚ìò icon in address bar\n`;
                    instructions += `   - Ensure "Sound" permission is allowed\n`;
                    instructions += `   - Reload the page\n\n`;
                    instructions += `4. Try clicking "Read Aloud" again!`;
                } else if (browserInfo.isFirefox) {
                    instructions += `‚ö†Ô∏è Firefox has limited text-to-speech support.\n\n`;
                    instructions += `Recommendation:\n`;
                    instructions += `- Use Chrome or Microsoft Edge for best results\n`;
                    instructions += `- Or continue without audio (visual learning still available!)`;
                } else {
                    instructions += `For best audio experience:\n`;
                    instructions += `- Use Chrome or Microsoft Edge\n`;
                    instructions += `- Ensure Windows speech is enabled in Settings\n`;
                    instructions += `- Check browser sound permissions`;
                }
            } else if (browserInfo.isMac) {
                instructions += `macOS Setup:\n\n`;
                instructions += `1. System Settings > Accessibility > Spoken Content\n`;
                instructions += `2. Enable "Speak selection"\n`;
                instructions += `3. Download additional voices if needed\n`;
                instructions += `4. Reload the page and try again`;
            } else {
                instructions += `General Setup:\n\n`;
                instructions += `1. Ensure your device has speakers/headphones connected\n`;
                instructions += `2. Check system sound settings\n`;
                instructions += `3. Try Chrome or Edge browser for best compatibility\n`;
                instructions += `4. Reload the page`;
            }

            instructions += `\n\nüí° Note: You can continue learning without audio - all content is text-based too!`;

            addMessage('ai', instructions, true);
        }

        function getBrowserInfo() {
            const ua = navigator.userAgent;
            const info = {
                isWindows: /Windows/.test(ua),
                isMac: /Macintosh/.test(ua),
                isChrome: /Chrome/.test(ua) && !/Edge/.test(ua),
                isEdge: /Edge|Edg/.test(ua),
                isFirefox: /Firefox/.test(ua),
                isSafari: /Safari/.test(ua) && !/Chrome/.test(ua),
                name: 'your browser'
            };

            if (info.isEdge) info.name = 'Microsoft Edge';
            else if (info.isChrome) info.name = 'Chrome';
            else if (info.isFirefox) info.name = 'Firefox';
            else if (info.isSafari) info.name = 'Safari';

            return info;
        }

        function speakText(text) {
            // Check if speech is available
            if (!speechAvailable || !voicesLoaded) {
                console.log('Speech not available, showing setup instructions');
                showSpeechSetupInstructions();
                return;
            }

            // Stop any current speech
            if (isSpeaking) {
                speechSynthesis.cancel();
            }

            // Clean text for speech (remove emojis and special characters)
            const cleanText = text.replace(/[üéìüí¨üìöüéØ‚ú®üí°üî•‚ö°üåüüìñüèÜüó∫Ô∏èüîó‚úÖ‚ùå‚Üí‚úìüîíüí™üéâüéäüìùü§ñüíéü¶ôüåäüë•üìù‚öñÔ∏èüîäüîá‚è∏Ô∏èüíéüåäü¶ô]/g, '').replace(/\n/g, '. ');

            currentUtterance = new SpeechSynthesisUtterance(cleanText);
            
            // Get available voices and prefer English ones
            const voices = speechSynthesis.getVoices();
            const englishVoice = voices.find(v => v.lang.startsWith('en'));
            if (englishVoice) {
                currentUtterance.voice = englishVoice;
            }
            
            currentUtterance.rate = 0.9;
            currentUtterance.pitch = 1;
            currentUtterance.volume = 1;

            currentUtterance.onstart = () => {
                isSpeaking = true;
                const speakBtn = document.getElementById('speakBtn');
                speakBtn.textContent = '‚è∏Ô∏è Pause';
                speakBtn.classList.add('bg-red-100', 'text-red-700', 'speak-active');
                speakBtn.classList.remove('bg-indigo-100', 'text-indigo-700');
            };

            currentUtterance.onend = () => {
                isSpeaking = false;
                const speakBtn = document.getElementById('speakBtn');
                speakBtn.textContent = 'üîä Read Aloud';
                speakBtn.classList.remove('bg-red-100', 'text-red-700', 'speak-active');
                speakBtn.classList.add('bg-indigo-100', 'text-indigo-700');
            };

            currentUtterance.onerror = (event) => {
                console.error('Speech synthesis error:', event);
                isSpeaking = false;
                const speakBtn = document.getElementById('speakBtn');
                speakBtn.textContent = 'üîä Read Aloud';
                speakBtn.classList.remove('bg-red-100', 'text-red-700', 'speak-active');
                speakBtn.classList.add('bg-indigo-100', 'text-indigo-700');
                
                if (event.error === 'not-allowed') {
                    addMessage('ai', 'üîá Audio permission needed! Please allow audio in your browser settings and try again.', true);
                }
            };

            try {
                speechSynthesis.speak(currentUtterance);
            } catch (error) {
                console.error('Error speaking:', error);
                addMessage('ai', 'üîá Unable to play audio. Please check your browser settings and try the setup instructions.', true);
            }
        }

        function toggleSpeech() {
            if (!speechAvailable) {
                showSpeechSetupInstructions();
                return;
            }

            if (isSpeaking) {
                speechSynthesis.cancel();
                isSpeaking = false;
                const speakBtn = document.getElementById('speakBtn');
                speakBtn.textContent = 'üîä Read Aloud';
                speakBtn.classList.remove('bg-red-100', 'text-red-700', 'speak-active');
                speakBtn.classList.add('bg-indigo-100', 'text-indigo-700');
            } else {
                const lastAI = messages.filter(m => m.type === 'ai').slice(-1)[0];
                if (lastAI) {
                    speakText(lastAI.text);
                } else {
                    speakText("Welcome to Prompt Engineering Mastery! I'm here to help you learn how to write effective prompts.");
                }
            }
        }

        // Guided Prompt Practice
        function showGuidedPrompt() {
            const lesson = lessons[currentLesson];
            
            if (currentLesson === 0) {
                // Lesson 1: Basics
                addMessage('ai', `üìù Let's practice together!\n\nStep 1: Pick a topic you want to ask about.\nFor example: "cooking", "travel", "coding", or "fitness"\n\nType your topic:`, true);
                if (speechAvailable) speakText("Let's practice together! Step 1: Pick a topic you want to ask about. For example: cooking, travel, coding, or fitness. Type your topic:");
            } else if (currentLesson === 1) {
                // Lesson 2: Be Clear & Specific
                addMessage('ai', `üìù Guided Practice: Making Prompts Specific\n\nLet's improve: "Tell me about exercise"\n\nStep 1: What TYPE of exercise? (running, yoga, weightlifting, etc.)\nStep 2: What do you want to know? (benefits, how-to, schedule, etc.)\nStep 3: For whom? (beginners, seniors, athletes, etc.)\n\nTry writing a specific version:`, true);
                if (speechAvailable) speakText("Guided Practice: Making Prompts Specific. Let's improve: Tell me about exercise. Step 1: What TYPE of exercise? Step 2: What do you want to know? Step 3: For whom? Try writing a specific version:");
            } else if (currentLesson === 2) {
                // Lesson 3: Provide Context
                addMessage('ai', `üìù Let's Build a Context-Rich Prompt!\n\nScenario: You want meal planning advice.\n\nStep 1: Who are you?\n- Example: "I'm a busy parent" or "I'm a college student"\nType your role:`, true);
                if (speechAvailable) speakText("Let's Build a Context-Rich Prompt! Scenario: You want meal planning advice. Step 1: Who are you? For example: I'm a busy parent or I'm a college student. Type your role:");
            } else if (currentLesson === 3) {
                // Lesson 4: Use Examples
                addMessage('ai', `üìù Few-Shot Learning Practice\n\nTask: Write product descriptions in a consistent style.\n\nI'll give you 2 examples, then you create one:\n\nExample 1: "Wireless Earbuds - Sound that moves with you. 20-hour battery. Crystal-clear calls. Your music, untethered."\n\nExample 2: "Smart Watch - Time reimagined. Track health. Stay connected. Live smarter."\n\nNow create one for: "Laptop Stand"\n\nWrite your description:`, true);
                if (speechAvailable) speakText("Few-Shot Learning Practice. Task: Write product descriptions in a consistent style. I'll give you 2 examples, then you create one. Now create one for: Laptop Stand. Write your description:");
            } else if (currentLesson === 4) {
                // Lesson 5: Chain of Thought
                addMessage('ai', `üìù Chain of Thought Practice\n\nProblem: "If I save $50 per week, how long until I have $3,000?"\n\nStep 1: Write a prompt asking AI to solve this step-by-step.\nTip: Use phrases like "think step-by-step" or "show your work"\n\nTry it:`, true);
                if (speechAvailable) speakText("Chain of Thought Practice. Problem: If I save 50 dollars per week, how long until I have 3000 dollars? Step 1: Write a prompt asking AI to solve this step-by-step. Tip: Use phrases like think step-by-step or show your work. Try it:");
            } else if (currentLesson === 5) {
                // Lesson 6: Role-Based
                addMessage('ai', `üìù Role Assignment Practice\n\nYou need advice on starting a small business.\n\nStep 1: Choose an expert role:\n- Business consultant\n- Startup advisor\n- Small business owner with 10 years experience\n- Financial planner\n\nStep 2: Write a prompt that:\na) Assigns the role\nb) Asks your specific question\n\nTry it:`, true);
                if (speechAvailable) speakText("Role Assignment Practice. You need advice on starting a small business. Step 1: Choose an expert role. Step 2: Write a prompt that assigns the role and asks your specific question. Try it:");
            } else if (currentLesson === 6) {
                // Lesson 7: Format Output
                addMessage('ai', `üìù Output Formatting Practice\n\nTask: Compare 3 smartphones\n\nStep 1: Decide on format (table, bullet points, pros/cons list)\nStep 2: Specify what to compare (price, camera, battery, etc.)\n\nWrite a prompt with clear formatting instructions:`, true);
                if (speechAvailable) speakText("Output Formatting Practice. Task: Compare 3 smartphones. Step 1: Decide on format. Step 2: Specify what to compare. Write a prompt with clear formatting instructions:");
            } else if (currentLesson === 7) {
                // Lesson 8: Constraints
                addMessage('ai', `üìù Setting Constraints Practice\n\nScenario: Write a blog post about productivity\n\nAdd these constraints:\n1. Length (word count)\n2. Tone (professional, casual, etc.)\n3. Audience (who's reading?)\n4. What to avoid\n5. How many main points\n\nWrite your constrained prompt:`, true);
                if (speechAvailable) speakText("Setting Constraints Practice. Scenario: Write a blog post about productivity. Add constraints like: Length, Tone, Audience, What to avoid, and How many main points. Write your constrained prompt:");
            } else if (currentLesson === 8) {
                // Lesson 9: Iterative Refinement
                addMessage('ai', `üìù Iteration Practice\n\nStart with: "Write about healthy eating"\n\nNow improve it 3 times:\n\nIteration 1: Add specificity\nIteration 2: Add context (who you are)\nIteration 3: Add format and constraints\n\nShow me your 3 versions:`, true);
                if (speechAvailable) speakText("Iteration Practice. Start with: Write about healthy eating. Now improve it 3 times. Iteration 1: Add specificity. Iteration 2: Add context. Iteration 3: Add format and constraints. Show me your 3 versions:");
            } else {
                // Lesson 10: Advanced
                addMessage('ai', `üìù Advanced Prompt Challenge!\n\nCreate a COMPLETE professional prompt combining:\n‚úì Role assignment\n‚úì Clear context\n‚úì Specific task\n‚úì Examples (if needed)\n‚úì Output format\n‚úì Constraints\n\nTopic: Create a social media strategy\n\nWrite your advanced prompt:`, true);
                if (speechAvailable) speakText("Advanced Prompt Challenge! Create a complete professional prompt combining: Role assignment, Clear context, Specific task, Examples, Output format, and Constraints. Topic: Create a social media strategy. Write your advanced prompt:");
            }
            earnPoints(10);
        }

        function nextLesson() {
            if (currentLesson < lessons.length - 1) {
                currentLesson++;
                lessonStep = 0;
                userProgress = 0;
                updateLessonDisplay();
                updateReferences();
                updateProgress();
                
                const lesson = lessons[currentLesson];
                const lessonMsg = `üéì Starting: ${lesson.title}\n\n${lesson.content.intro}\n\n${lesson.content.question}`;
                addMessage('ai', lessonMsg, true);
                if (speechAvailable) speakText(lessonMsg);
            } else {
                const finalMsg = "üéâ Congratulations! You've completed all 10 lessons! You're now a Prompt Engineering expert!\n\nExplore the LLM Explorer to practice your skills with different AI models! ü§ñ";
                addMessage('ai', finalMsg, true);
                if (speechAvailable) speakText(finalMsg);
                earnPoints(100);
            }
        }

        // Flashcard Functions
        function showFlashcards() {
            document.getElementById('flashcardSection').classList.remove('hidden');
            currentFlashcardIndex = 0;
            flashcardFlipped = false;
            updateFlashcard();
            
            // Smooth scroll to flashcards
            setTimeout(() => {
                document.getElementById('flashcardSection').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'nearest' 
                });
            }, 100);
        }

        function closeFlashcards() {
            document.getElementById('flashcardSection').classList.add('hidden');
        }

        function flipCard() {
            flashcardFlipped = !flashcardFlipped;
            const container = document.getElementById('flashcardContainer');
            if (flashcardFlipped) {
                container.classList.add('flashcard-flipped');
            } else {
                container.classList.remove('flashcard-flipped');
            }
        }

        function nextCard() {
            const cards = lessons[currentLesson].flashcards;
            currentFlashcardIndex = (currentFlashcardIndex + 1) % cards.length;
            flashcardFlipped = false;
            document.getElementById('flashcardContainer').classList.remove('flashcard-flipped');
            updateFlashcard();
        }

        function previousCard() {
            const cards = lessons[currentLesson].flashcards;
            currentFlashcardIndex = (currentFlashcardIndex - 1 + cards.length) % cards.length;
            flashcardFlipped = false;
            document.getElementById('flashcardContainer').classList.remove('flashcard-flipped');
            updateFlashcard();
        }

        function updateFlashcard() {
            const cards = lessons[currentLesson].flashcards;
            const card = cards[currentFlashcardIndex];
            document.getElementById('flashcardFront').textContent = card.front;
            document.getElementById('flashcardBack').textContent = card.back;
            document.getElementById('cardCounter').textContent = `${currentFlashcardIndex + 1} / ${cards.length}`;
        }

        // UI Update Functions
        function updateLessonDisplay() {
            const lesson = lessons[currentLesson];
            document.getElementById('currentLessonTitle').textContent = lesson.title;
            document.getElementById('currentLessonConcept').textContent = lesson.concept;
            updateLearningPath();
        }

        function updateReferences() {
            const lesson = lessons[currentLesson];
            document.getElementById('referencesDescription').textContent = `Resources for ${lesson.title}`;
            
            const container = document.getElementById('referencesContainer');
            container.innerHTML = '';
            
            lesson.references.forEach(ref => {
                const refDiv = document.createElement('a');
                refDiv.href = ref.url;
                refDiv.target = '_blank';
                refDiv.className = 'block p-2 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg hover:shadow-md transition border border-blue-200';
                refDiv.innerHTML = `
                    <h4 class="font-semibold text-gray-800 text-xs">${ref.title}</h4>
                    <span class="inline-block px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full mt-1">${ref.type}</span>
                `;
                container.appendChild(refDiv);
            });
        }

        function updateProgress() {
            // Progress tracking removed from UI banner for cleaner display
            // Progress is still tracked internally for lesson completion
        }

        function updateStreak() {
            document.getElementById('streakCounter').textContent = `${streak} Day Streak! üî•`;
        }

        function updatePoints() {
            document.getElementById('totalPoints').textContent = points;
            checkBadges();
        }

        function checkBadges() {
            badgesList.forEach(badge => {
                if (points >= badge.points && !badges.find(b => b.id === badge.id)) {
                    badges.push(badge);
                    updateBadges();
                    addMessage('ai', `üéâ Congratulations! You've earned the ${badge.icon} ${badge.name} badge!`, true);
                }
            });
        }

        function updateBadges() {
            const container = document.getElementById('badgesContainer');
            
            if (badges.length > 0) {
                container.innerHTML = '';
                badges.forEach(badge => {
                    const badgeDiv = document.createElement('div');
                    badgeDiv.className = 'bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg p-2 text-center badge-pulse';
                    badgeDiv.innerHTML = `
                        <span class="text-2xl">${badge.icon}</span>
                        <p class="text-xs font-semibold text-gray-800 mt-1">${badge.name}</p>
                    `;
                    container.appendChild(badgeDiv);
                });
            } else {
                container.innerHTML = '<p class="text-gray-500 text-xs col-span-2">Keep learning to earn badges!</p>';
            }
        }

        function updateLearningPath() {
            const container = document.getElementById('learningPath');
            container.innerHTML = '';
            
            lessons.forEach((lesson, idx) => {
                const lessonDiv = document.createElement('div');
                lessonDiv.className = `p-2 rounded-lg border-2 transition-all cursor-pointer hover:shadow-md ${
                    idx === currentLesson 
                        ? 'border-blue-500 bg-blue-50' 
                        : idx < currentLesson 
                        ? 'border-green-300 bg-green-50' 
                        : 'border-gray-200 bg-gray-50'
                }`;
                
                lessonDiv.onclick = () => {
                    if (idx <= currentLesson) {
                        currentLesson = idx;
                        lessonStep = 0;
                        userProgress = 0;
                        updateLessonDisplay();
                        updateReferences();
                        updateProgress();
                        messages = [];
                        document.getElementById('chatMessages').innerHTML = '';
                        const lessonMsg = `üéì ${lesson.title}\n\n${lesson.content.intro}\n\n${lesson.content.question}`;
                        addMessage('ai', lessonMsg, true);
                        if (speechAvailable) speakText(lessonMsg);
                    }
                };
                
                const icon = idx < currentLesson 
                    ? '<span class="text-green-600 text-xs font-bold">‚úì</span>'
                    : idx === currentLesson 
                    ? '<span class="text-blue-600 text-xs font-bold">‚Üí</span>'
                    : '<span class="text-gray-400 text-xs">üîí</span>';
                
                lessonDiv.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex-1 pr-1">
                            <h4 class="font-semibold text-gray-800 text-xs leading-tight">${lesson.title}</h4>
                        </div>
                        ${icon}
                    </div>
                `;
                container.appendChild(lessonDiv);
            });
        }

        // Initialize on page load
        window.onload = function() {
            // Initialize speech synthesis
            initializeSpeech();
            
            updateLessonDisplay();
            updateReferences();
            updateProgress();
            updateStreak();
            updatePoints();
            
            const lesson = lessons[0];
            const welcomeMsg = `Welcome to Prompt Engineering Mastery! üéì

I'll teach you how to write effective prompts through 10 interactive lessons.

‚ú® NEW FEATURES:
üîä Click "Read Aloud" to hear lessons
üìù Click "Guided Practice" for step-by-step exercises
üí° Get hints anytime you're stuck

Let's start with: ${lesson.title}

${lesson.content.intro}

${lesson.content.question}`;
            
            addMessage('ai', welcomeMsg, true);
            
            // Auto-read welcome message if speech is available (with delay for voice loading)
            setTimeout(() => {
                if (speechAvailable && voicesLoaded) {
                    speakText(welcomeMsg);
                } else {
                    console.log('Speech not ready yet, click "Read Aloud" when ready');
                }
            }, 1500);
        };
    </script>
</body>
</html>